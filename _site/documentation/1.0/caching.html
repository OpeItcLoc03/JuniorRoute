<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Caching - JuniorRoute</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width">
		<link rel="shortcut icon" href="../../favicon.ico">
		<link rel="stylesheet" href="../../css/normalize.css">
		<link rel="stylesheet" href="../../css/main.css">
		<link rel="stylesheet" href="../../css/common.css">
		<link rel="stylesheet" href="../../css/pygments.css">
		<script src="../../js/vendor/modernizr-2.6.2.min.js"></script>
	</head>
	<body>
		<!--[if lt IE 7]>
			<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
		<![endif]-->
		<div class="header">
	<h1>JuniorRoute</h1>
	<h2>the easy-to-learn, easy-to-use routing framework for .NET</h2>
</div>
		<div class="header-links">
	<div class="link-container-left menu" -data-menu="documentation-menu">
		<a href="../../documentation/1.0/quick_start.html">Documentation</a>
		<div class="menu-drop-down documentation-menu visuallyhidden">
			<a href="../../documentation/1.0/quick_start.html">Version 1.0</a>
		</div>
	</div>
	<div class="link-container-left menu" -data-menu="resources-menu">
		<span class="dummy">Resources</span>
		<div class="menu-drop-down resources-menu visuallyhidden">
			<a href="https://github.com/NathanAlden/JuniorRoute" target="_blank">Respository</a><br/>
			<a href="https://github.com/NathanAlden/JuniorRoute/wiki" target="_blank">Wiki</a>
		</div>
	</div>
	<div class="spacer"></div>
	<div class="link-container-right menu" -data-menu="other-projects-menu">
		<a href="https://github.com/NathanAlden" target="_blank">Other Projects by Nathan Alden, Sr.</a>
		<div class="menu-drop-down other-projects-menu visuallyhidden">
			<a href="https://github.com/NathanAlden/JuniorPersist">JuniorPersist</a></br>
			<a href="https://github.com/NathanAlden/JuniorMap">JuniorMap</a></br>
			<a href="https://github.com/NathanAlden/FirefoxAutoRefresh">Firefox Auto Refresh</a></br>
			<a href="https://github.com/NathanAlden" class="and-more">...and more!</a>
		</div>
	</div>
</div>
		<div class="documentation">
	<div class="navigation">
		<a href="../../index.html">Introduction</a>
		<div class="section">
			<a href="../../understanding_http_1.1.html">Understanding HTTP 1.1</a><br/>
		</div>
		<div class="section documentation-version">Version 1.0 Documentation</div>
		<div class="section">
			<a href="../../documentation/1.0/quick_start.html" class="quick-start">Quick-start</a><br/>
		</div>
		<div class="section">Core concepts</div>
		<div class="section-links">
			<a href="../../documentation/1.0/routes.html">Routes</a><br/>
			<a href="../../documentation/1.0/route_collections.html">Route collections</a><br/>
			<a href="../../documentation/1.0/restrictions.html">Restrictions</a><br/>
			<a href="../../documentation/1.0/responses.html">Responses</a><br/>
			<a href="../../documentation/1.0/caching.html">Caching</a><br/>
			<a href="../../documentation/1.0/authentication_providers.html">Authentication providers</a><br/>
			<a href="../../documentation/1.0/request_value_comparers.html">Request value comparers</a><br/>
			<a href="../../documentation/1.0/url_resolvers.html">URL resolvers</a>
		</div>
		<div class="section">Asset management</div>
		<div class="section-links">
			<a href="../../documentation/1.0/assets.html">Assets</a><br/>
			<a href="../../documentation/1.0/bundles.html">Bundles</a><br/>
			<a href="../../documentation/1.0/asset_concatenators.html">Asset Concatenators</a><br/>
			<a href="../../documentation/1.0/asset_transformers.html">Asset Transformers</a><br/>
			<a href="../../documentation/1.0/bundle_watchers.html">Bundle watchers</a><br/>
			<a href="../../documentation/1.0/bundle_watcher_routes.html">Bundle watcher routes</a>
		</div>
		<div class="section">
			<a href="../../documentation/1.0/diagnostics.html">Diagnostics</a>
			<div class="section-links">
				<a href="../../documentation/1.0/diagnosticroutehelper.html">DiagnosticRouteHelper</a><br/>
				<a href="../../documentation/1.0/diagnostic_configurations.html">Diagnostic configurations</a>
			</div>
		</div>
		<div class="section">ASP.net integration</div>
		<div class="section-links">
			<a href="../../documentation/1.0/juniorrouteapplication.html">JuniorRouteApplication</a><br/>
			<a href="../../documentation/1.0/juniorrouteapplicationconfiguration.html">JuniorRouteApplicationConfiguration</a><br/>
			<a href="../../documentation/1.0/aspnethttphandler.html">AspNetHttpHandler</a><br/>
			<a href="../../documentation/1.0/response_generators.html">Response generators</a><br/>
			<a href="../../documentation/1.0/response_handlers.html">Response handlers</a><br/>
			<a href="../../documentation/1.0/file_systems.html">FileSystem</a><br/>
			<a href="../../documentation/1.0/url_resolvers.html">UrlResolver</a>
		</div>
		<a href="../../documentation/1.0/auto_routing.html">Auto-routing</a>
		<div class="section-links">
			<a href="../../documentation/1.0/autoroutecollection.html">AutoRouteCollection</a><br/>
			<a href="../../documentation/1.0/containers.html">Containers</a><br/>
			<a href="../../documentation/1.0/class_filters.html">Class filters</a><br/>
			<a href="../../documentation/1.0/method_filters.html">Method filters</a><br/>
			<a href="../../documentation/1.0/name_mappers.html">Name mappers</a><br/>
			<a href="../../documentation/1.0/id_mappers.html">ID mappers</a><br/>
			<a href="../../documentation/1.0/resolved_relative_url_mappers.html">Resolved relative URL mappers</a><br/>
			<a href="../../documentation/1.0/restriction_mappers.html">Restriction mappers</a><br/>
			<a href="../../documentation/1.0/parameter_mappers.html">Parameter mappers</a><br/>
			<a href="../../documentation/1.0/model_property_mappers.html">Model property mappers</a><br/>
			<a href="../../documentation/1.0/response_mappers.html">Response mappers</a><br/>
			<a href="../../documentation/1.0/authentication_strategies.html">Authentication strategies</a><br/>
			<a href="../../documentation/1.0/forms_authentication.html">Forms authentication</a><br/>
			<a href="../../documentation/1.0/request_contexts.html">Request contexts</a>
		</div>
	</div>
	<div class="document"><h1 id='core_concept__caching'>Core Concept - Caching</h1>

<p>Developers may optionally use JuniorRoute&#8217;s built-in caching mechanism to cache <a href='../../documentation/1.0/responses.html'>responses</a>. Caching is performed at the response-level rather than the <a href='../../documentation/1.0/routes.html'>route</a>-level for maximum flexibility. If a developer chooses, a single route may return many different responses, each with their own cache policy. JuniorRoute&#8217;s ASP.net integration layer handles cache policies by following the HTTP 1.1 specification&#8217;s requirements and recommendations. The underlying cache mechanism is ASP.net&#8217;s <code>HttpRuntime.Cache</code> singleton.</p>

<p>By default, a <code>Response</code> instance has no cache policy attached, meaning the response is not cached on the server.</p>

<p>In the below example, a route is configured to return a response that defines a public client caching and server caching policy. The effect of this policy is to cache the response at the client until the current client time is <code>DateTime.UtcNow</code> plus five minutes. For clients that do not already have the response in their cache, the server cache is used with that same expiration timestamp. Although developers may configure client and server expiration timestamps or maximum ages independently, it is recommended to use the same expiration policy when using client and server caching.</p>
<div class='highlight'><pre><code class='csharp'><span class='n'>Response</span> <span class='n'>response</span> <span class='p'>=</span> <span class='n'>Response</span>
  <span class='p'>.</span><span class='n'>OK</span><span class='p'>()</span>
  <span class='p'>.</span><span class='n'>Content</span><span class='p'>(()</span> <span class='p'>=&gt;</span> <span class='n'>DateTime</span><span class='p'>.</span><span class='n'>UtcNow</span><span class='p'>.</span><span class='n'>ToString</span><span class='p'>(</span><span class='n'>CultureInfo</span><span class='p'>.</span><span class='n'>InvariantCulture</span><span class='p'>));</span>
<span class='n'>DateTime</span> <span class='n'>expirationUtcTimestamp</span> <span class='p'>=</span> <span class='n'>DateTime</span><span class='p'>.</span><span class='n'>UtcNow</span><span class='p'>.</span><span class='n'>AddMinutes</span><span class='p'>(</span><span class='m'>5</span><span class='p'>);</span>

<span class='n'>response</span><span class='p'>.</span><span class='n'>CachePolicy</span>
  <span class='p'>.</span><span class='n'>PublicClientCaching</span><span class='p'>(</span><span class='n'>expirationUtcTimestamp</span><span class='p'>)</span>
  <span class='p'>.</span><span class='n'>ServerCaching</span><span class='p'>(</span><span class='n'>expirationUtcTimestamp</span><span class='p'>);</span>

<span class='k'>new</span> <span class='nf'>Route</span><span class='p'>(</span><span class='s'>&quot;route&quot;</span><span class='p'>,</span> <span class='n'>Guid</span><span class='p'>.</span><span class='n'>NewGuid</span><span class='p'>(),</span> <span class='s'>&quot;route&quot;</span><span class='p'>)</span>
  <span class='p'>.</span><span class='n'>RespondWith</span><span class='p'>(</span><span class='n'>response</span><span class='p'>);</span>
</code></pre>
</div>
<p>In the below example, only the server is allowed to cache the response.</p>
<div class='highlight'><pre><code class='csharp'><span class='n'>Response</span> <span class='n'>response</span> <span class='p'>=</span> <span class='n'>Response</span>
  <span class='p'>.</span><span class='n'>OK</span><span class='p'>()</span>
  <span class='p'>.</span><span class='n'>Content</span><span class='p'>(()</span> <span class='p'>=&gt;</span> <span class='n'>DateTime</span><span class='p'>.</span><span class='n'>UtcNow</span><span class='p'>.</span><span class='n'>ToString</span><span class='p'>(</span><span class='n'>CultureInfo</span><span class='p'>.</span><span class='n'>InvariantCulture</span><span class='p'>));</span>
<span class='n'>DateTime</span> <span class='n'>expirationUtcTimestamp</span> <span class='p'>=</span> <span class='n'>DateTime</span><span class='p'>.</span><span class='n'>UtcNow</span><span class='p'>.</span><span class='n'>AddMinutes</span><span class='p'>(</span><span class='m'>5</span><span class='p'>);</span>

<span class='n'>response</span><span class='p'>.</span><span class='n'>CachePolicy</span>
  <span class='p'>.</span><span class='n'>NoClientCaching</span><span class='p'>()</span>
  <span class='p'>.</span><span class='n'>ServerCaching</span><span class='p'>(</span><span class='n'>expirationUtcTimestamp</span><span class='p'>);</span>

<span class='k'>new</span> <span class='nf'>Route</span><span class='p'>(</span><span class='s'>&quot;route&quot;</span><span class='p'>,</span> <span class='n'>Guid</span><span class='p'>.</span><span class='n'>NewGuid</span><span class='p'>(),</span> <span class='s'>&quot;route&quot;</span><span class='p'>)</span>
  <span class='p'>.</span><span class='n'>RespondWith</span><span class='p'>(</span><span class='n'>response</span><span class='p'>);</span>
</code></pre>
</div>
<p>In the below example, no caching of any kind is allowed.</p>
<div class='highlight'><pre><code class='csharp'><span class='n'>Response</span> <span class='n'>response</span> <span class='p'>=</span> <span class='n'>Response</span>
  <span class='p'>.</span><span class='n'>OK</span><span class='p'>()</span>
  <span class='p'>.</span><span class='n'>Content</span><span class='p'>(()</span> <span class='p'>=&gt;</span> <span class='n'>DateTime</span><span class='p'>.</span><span class='n'>UtcNow</span><span class='p'>.</span><span class='n'>ToString</span><span class='p'>(</span><span class='n'>CultureInfo</span><span class='p'>.</span><span class='n'>InvariantCulture</span><span class='p'>));</span>

<span class='n'>response</span><span class='p'>.</span><span class='n'>CachePolicy</span>
  <span class='p'>.</span><span class='n'>NoClientCaching</span><span class='p'>()</span>
  <span class='p'>.</span><span class='n'>NoServerCaching</span><span class='p'>();</span>

<span class='k'>new</span> <span class='nf'>Route</span><span class='p'>(</span><span class='s'>&quot;route&quot;</span><span class='p'>,</span> <span class='n'>Guid</span><span class='p'>.</span><span class='n'>NewGuid</span><span class='p'>(),</span> <span class='s'>&quot;route&quot;</span><span class='p'>)</span>
  <span class='p'>.</span><span class='n'>RespondWith</span><span class='p'>(</span><span class='n'>response</span><span class='p'>);</span>
</code></pre>
</div>
<p>In the below example, an eTag is associated with the response:</p>
<div class='highlight'><pre><code class='csharp'><span class='n'>Response</span> <span class='n'>response</span> <span class='p'>=</span> <span class='n'>Response</span>
  <span class='p'>.</span><span class='n'>OK</span><span class='p'>()</span>
  <span class='p'>.</span><span class='n'>Content</span><span class='p'>(()</span> <span class='p'>=&gt;</span> <span class='n'>DateTime</span><span class='p'>.</span><span class='n'>UtcNow</span><span class='p'>.</span><span class='n'>ToString</span><span class='p'>(</span><span class='n'>CultureInfo</span><span class='p'>.</span><span class='n'>InvariantCulture</span><span class='p'>));</span>

<span class='n'>response</span><span class='p'>.</span><span class='n'>CachePolicy</span>
  <span class='p'>.</span><span class='n'>PublicClientCaching</span><span class='p'>(</span><span class='n'>TimeSpan</span><span class='p'>.</span><span class='n'>FromMinutes</span><span class='p'>(</span><span class='m'>10</span><span class='p'>))</span>
  <span class='p'>.</span><span class='n'>ETag</span><span class='p'>(</span><span class='s'>&quot;2b58a5bb-9f79-4930-ad56-039faca98fe0&quot;</span><span class='p'>);</span>

<span class='k'>new</span> <span class='nf'>Route</span><span class='p'>(</span><span class='s'>&quot;route&quot;</span><span class='p'>,</span> <span class='n'>Guid</span><span class='p'>.</span><span class='n'>NewGuid</span><span class='p'>(),</span> <span class='s'>&quot;route&quot;</span><span class='p'>)</span>
  <span class='p'>.</span><span class='n'>RespondWith</span><span class='p'>(</span><span class='n'>response</span><span class='p'>);</span>
</code></pre>
</div>
<h2 id='extensibility'>Extensibility</h2>

<p>Developers may create their own caches by implementing the <code>ICache</code> interface.</p>

<p>Developers may create their own cache policy by implementing the <code>ICachePolicy</code> interface.</p></div>
</div>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script>window.jQuery || document.write('<script src="../../js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
		<script src="../../js/plugins.js"></script>
		<script>
			var _gaq=[['_setAccount','UA-36144505-1'],['_trackPageview']];
				(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
				g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
				s.parentNode.insertBefore(g,s)}(document,'script'));
		</script>
    </body>
</html>