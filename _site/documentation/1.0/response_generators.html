<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Response Generators - JuniorRoute</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width">
		<link rel="shortcut icon" href="../../favicon.ico">
		<link rel="stylesheet" href="../../css/normalize.css">
		<link rel="stylesheet" href="../../css/main.css">
		<link rel="stylesheet" href="../../css/common.css">
		<link rel="stylesheet" href="../../css/pygments.css">
		<script src="../../js/vendor/modernizr-2.6.2.min.js"></script>
	</head>
	<body>
		<!--[if lt IE 7]>
			<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
		<![endif]-->
		<div class="header">
	<h1>JuniorRoute</h1>
	<h2>the easy-to-learn, easy-to-use routing framework for .NET</h2>
</div>
		<div class="header-links">
	<div class="link-container-left menu" -data-menu="documentation-menu">
		<a href="../../documentation/1.0/quick_start.html">Documentation</a>
		<div class="menu-drop-down documentation-menu visuallyhidden">
			<a href="../../documentation/1.0/quick_start.html">Version 1.0</a>
		</div>
	</div>
	<div class="link-container-left menu" -data-menu="resources-menu">
		<span class="dummy">Resources</span>
		<div class="menu-drop-down resources-menu visuallyhidden">
			<a href="https://github.com/NathanAlden/JuniorRoute" target="_blank">Respository</a><br/>
			<a href="https://github.com/NathanAlden/JuniorRoute/wiki" target="_blank">Wiki</a>
		</div>
	</div>
	<div class="spacer"></div>
	<div class="link-container-right menu" -data-menu="other-projects-menu">
		<a href="https://github.com/NathanAlden" target="_blank">Other Projects by Nathan Alden, Sr.</a>
		<div class="menu-drop-down other-projects-menu visuallyhidden">
			<a href="https://github.com/NathanAlden/JuniorPersist">JuniorPersist</a></br>
			<a href="https://github.com/NathanAlden/JuniorMap">JuniorMap</a></br>
			<a href="https://github.com/NathanAlden/FirefoxAutoRefresh">Firefox Auto Refresh</a></br>
			<a href="https://github.com/NathanAlden" class="and-more">...and more!</a>
		</div>
	</div>
</div>
		<div class="documentation">
	<div class="navigation">
		<a href="../../index.html">Introduction</a>
		<div class="section">
			<a href="../../understanding_http_1.1.html">Understanding HTTP 1.1</a><br/>
		</div>
		<div class="section documentation-version">Version 1.0 Documentation</div>
		<div class="section">
			<a href="../../documentation/1.0/quick_start.html" class="quick-start">Quick-start</a><br/>
		</div>
		<div class="section">Core concepts</div>
		<div class="section-links">
			<a href="../../documentation/1.0/routes.html">Routes</a><br/>
			<a href="../../documentation/1.0/route_collections.html">Route collections</a><br/>
			<a href="../../documentation/1.0/restrictions.html">Restrictions</a><br/>
			<a href="../../documentation/1.0/responses.html">Responses</a><br/>
			<a href="../../documentation/1.0/caching.html">Caching</a><br/>
			<a href="../../documentation/1.0/authentication_providers.html">Authentication providers</a><br/>
			<a href="../../documentation/1.0/request_value_comparers.html">Request value comparers</a><br/>
			<a href="../../documentation/1.0/url_resolvers.html">URL resolvers</a>
		</div>
		<div class="section">Asset management</div>
		<div class="section-links">
			<a href="../../documentation/1.0/assets.html">Assets</a><br/>
			<a href="../../documentation/1.0/bundles.html">Bundles</a><br/>
			<a href="../../documentation/1.0/asset_concatenators.html">Asset Concatenators</a><br/>
			<a href="../../documentation/1.0/asset_transformers.html">Asset Transformers</a><br/>
			<a href="../../documentation/1.0/bundle_watchers.html">Bundle watchers</a><br/>
			<a href="../../documentation/1.0/bundle_watcher_routes.html">Bundle watcher routes</a>
		</div>
		<div class="section">
			<a href="../../documentation/1.0/diagnostics.html">Diagnostics</a>
			<div class="section-links">
				<a href="../../documentation/1.0/diagnosticroutehelper.html">DiagnosticRouteHelper</a><br/>
				<a href="../../documentation/1.0/diagnostic_configurations.html">Diagnostic configurations</a>
			</div>
		</div>
		<div class="section">ASP.net integration</div>
		<div class="section-links">
			<a href="../../documentation/1.0/juniorrouteapplication.html">JuniorRouteApplication</a><br/>
			<a href="../../documentation/1.0/juniorrouteapplicationconfiguration.html">JuniorRouteApplicationConfiguration</a><br/>
			<a href="../../documentation/1.0/aspnethttphandler.html">AspNetHttpHandler</a><br/>
			<a href="../../documentation/1.0/response_generators.html">Response generators</a><br/>
			<a href="../../documentation/1.0/response_handlers.html">Response handlers</a><br/>
			<a href="../../documentation/1.0/file_systems.html">FileSystem</a><br/>
			<a href="../../documentation/1.0/url_resolvers.html">UrlResolver</a>
		</div>
		<a href="../../documentation/1.0/auto_routing.html">Auto-routing</a>
		<div class="section-links">
			<a href="../../documentation/1.0/autoroutecollection.html">AutoRouteCollection</a><br/>
			<a href="../../documentation/1.0/containers.html">Containers</a><br/>
			<a href="../../documentation/1.0/class_filters.html">Class filters</a><br/>
			<a href="../../documentation/1.0/method_filters.html">Method filters</a><br/>
			<a href="../../documentation/1.0/name_mappers.html">Name mappers</a><br/>
			<a href="../../documentation/1.0/id_mappers.html">ID mappers</a><br/>
			<a href="../../documentation/1.0/resolved_relative_url_mappers.html">Resolved relative URL mappers</a><br/>
			<a href="../../documentation/1.0/restriction_mappers.html">Restriction mappers</a><br/>
			<a href="../../documentation/1.0/parameter_mappers.html">Parameter mappers</a><br/>
			<a href="../../documentation/1.0/model_property_mappers.html">Model property mappers</a><br/>
			<a href="../../documentation/1.0/response_mappers.html">Response mappers</a><br/>
			<a href="../../documentation/1.0/authentication_strategies.html">Authentication strategies</a><br/>
			<a href="../../documentation/1.0/forms_authentication.html">Forms authentication</a><br/>
			<a href="../../documentation/1.0/request_contexts.html">Request contexts</a>
		</div>
	</div>
	<div class="document"><h1 id='aspnet_integration__response_generators'>ASP.net Integration - Response Generators</h1>

<p>Response generators analyze a set of route match results and optionally return a <a href='../../documentation/1.0/responses.html'>response</a>. It&#8217;s possible for response generators to handle multiple matching routes, in addition to the more common scenarios of a single matching route or no matching routes.</p>

<p>In the below example, a response generator is defined that generates a response containing the number of route match results.</p>
<div class='highlight'><pre><code class='csharp'><span class='k'>public</span> <span class='k'>class</span> <span class='nc'>Generator</span> <span class='p'>:</span> <span class='n'>IResponseGenerator</span>
<span class='p'>{</span>
  <span class='k'>public</span> <span class='n'>ResponseResult</span> <span class='nf'>GetResponse</span><span class='p'>(</span><span class='n'>HttpRequestBase</span> <span class='n'>request</span><span class='p'>,</span> <span class='n'>IEnumerable</span><span class='p'>&lt;</span><span class='n'>RouteMatchResult</span><span class='p'>&gt;</span> <span class='n'>routeMatchResults</span><span class='p'>)</span>
  <span class='p'>{</span>
    <span class='n'>Response</span> <span class='n'>response</span> <span class='p'>=</span> <span class='n'>Response</span>
      <span class='p'>.</span><span class='n'>OK</span><span class='p'>()</span>
      <span class='p'>.</span><span class='n'>TextPlain</span><span class='p'>()</span>
      <span class='p'>.</span><span class='n'>Content</span><span class='p'>(</span><span class='n'>routeMatchResults</span><span class='p'>.</span><span class='n'>Count</span><span class='p'>().</span><span class='n'>ToString</span><span class='p'>(</span><span class='n'>CultureInfo</span><span class='p'>.</span><span class='n'>InvariantCulture</span><span class='p'>));</span>

    <span class='k'>return</span> <span class='n'>ResponseResult</span><span class='p'>.</span><span class='n'>ResponseGenerated</span><span class='p'>(</span><span class='n'>response</span><span class='p'>);</span>
  <span class='p'>}</span>
<span class='p'>}</span>
</code></pre>
</div>
<p>JuniorRoute provides three built-in implementations:</p>

<ul>
<li><code>MostMatchingRestrictionsGenerator</code></li>

<li><code>UnmatchedRestrictionsGenerator</code></li>

<li><code>NotFoundGenerator</code></li>
</ul>

<p>In most cases, these three generators should be provided to <a href='../../documentation/1.0/aspnethttphandler.html'><code>AspNetHttpHandler</code></a> in the order listed here.</p>

<h2 id='mostmatchingrestrictionsgenerator'>MostMatchingRestrictionsGenerator</h2>

<p>This implementation determines the route that best matched the HTTP request message. A &#8220;best match&#8221; is defined as the route with the most matched <a href='../../documentation/1.0/restrictions.html'>restrictions</a> and no unmatched restrictions. Responses are generated in the following cases:</p>

<ul>
<li>if more than one route share the same number of matching restrictions, a 300 Multiple Choices response is generated</li>

<li>if a single route had the most matching restrictions and the route failed authentication, a 401 Unauthorized is generated</li>

<li>if a single route had the most matching restrictions and the route passed authentication, the route&#8217;s response is returned</li>
</ul>

<p>If the route returned a null response, an exception is thrown. If no route had all its restrictions match, no response is generated.</p>

<h2 id='unmatchedrestrictionsgenerator'>UnmatchedRestrictionsGenerator</h2>

<p>This implementation generates responses in the case where no routes had all their restrictions match. The HTTP 1.1 specification defines several rules for when the Web server is unable to determine how to respond; JuniorRoute attempts to implement those rules.</p>

<p>For a route to be considered by this implementation, it must have matched at least one <code>UrlRelativePathRestriction</code> and must not have an unmatched <code>UrlRelativePathRestriction</code>.</p>

<p>First, the route with the fewest unmatched restrictions is determined. If more than one route share the fewest unmatched restrictions, no response is generated. If a single route had the fewest number of unmatched restrictions, responses are generated in the following cases:</p>

<ul>
<li>if any <code>MethodRestriction</code>s were unmatched, a 405 Method Not Allowed is generated with the appropriate Allow header</li>

<li>if any <code>HeaderRestriction&lt;AcceptHeader&gt;</code>s were unmatched, a 406 Not Acceptable is generated</li>

<li>if any <code>HeaderRestriction&lt;AcceptCharsetHeader&gt;</code>s were unmatched, a 406 Not Acceptable is generated</li>

<li>if any <code>HeaderRestriction&lt;AcceptEncodingHeader&gt;</code>s were unmatched, a 406 Not Acceptable is generated</li>

<li>if any <code>HeaderRestriction&lt;ContentEncodingHeader&gt;</code>s were unmatched, a 415 Unsupported Media Type is generated</li>
</ul>

<h2 id='notfoundgenerator'>NotFoundGenerator</h2>

<p>This implementation always generates a 404 Not Found.</p>

<h2 id='extensibility'>Extensibility</h2>

<p>Developers may create their own response generators by implementing the <code>IResponseGenerator</code> interface.</p></div>
</div>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script>window.jQuery || document.write('<script src="../../js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
		<script src="../../js/plugins.js"></script>
		<script>
			var _gaq=[['_setAccount','UA-36144505-1'],['_trackPageview']];
				(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
				g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
				s.parentNode.insertBefore(g,s)}(document,'script'));
		</script>
    </body>
</html>