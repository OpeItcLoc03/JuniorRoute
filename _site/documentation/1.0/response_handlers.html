<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Response Handlers - JuniorRoute</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width">
		<link rel="shortcut icon" href="../../favicon.ico">
		<link rel="stylesheet" href="../../css/normalize.css">
		<link rel="stylesheet" href="../../css/main.css">
		<link rel="stylesheet" href="../../css/common.css">
		<link rel="stylesheet" href="../../css/pygments.css">
		<script src="../../js/vendor/modernizr-2.6.2.min.js"></script>
	</head>
	<body>
		<!--[if lt IE 7]>
			<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
		<![endif]-->
		<div class="header">
	<h1>JuniorRoute</h1>
	<h2>the easy-to-learn, easy-to-use routing framework for .NET</h2>
</div>
		<div class="header-links">
	<div class="link-container-left menu" -data-menu="documentation-menu">
		<a href="../../documentation/1.0/quick_start.html">Documentation</a>
		<div class="menu-drop-down documentation-menu visuallyhidden">
			<a href="../../documentation/1.0/quick_start.html">Version 1.0</a>
		</div>
	</div>
	<div class="link-container-left menu" -data-menu="resources-menu">
		<span class="dummy">Resources</span>
		<div class="menu-drop-down resources-menu visuallyhidden">
			<a href="https://github.com/NathanAlden/JuniorRoute" target="_blank">Respository</a><br/>
			<a href="https://github.com/NathanAlden/JuniorRoute/wiki" target="_blank">Wiki</a>
		</div>
	</div>
	<div class="spacer"></div>
	<div class="link-container-right menu" -data-menu="other-projects-menu">
		<a href="https://github.com/NathanAlden" target="_blank">Other Projects by Nathan Alden, Sr.</a>
		<div class="menu-drop-down other-projects-menu visuallyhidden">
			<a href="https://github.com/NathanAlden/JuniorPersist">JuniorPersist</a></br>
			<a href="https://github.com/NathanAlden/JuniorMap">JuniorMap</a></br>
			<a href="https://github.com/NathanAlden/FirefoxAutoRefresh">Firefox Auto Refresh</a></br>
			<a href="https://github.com/NathanAlden" class="and-more">...and more!</a>
		</div>
	</div>
</div>
		<div class="documentation">
	<div class="navigation">
		<a href="../../index.html">Introduction</a>
		<div class="section">
			<a href="../../understanding_http_1.1.html">Understanding HTTP 1.1</a><br/>
		</div>
		<div class="section documentation-version">Version 1.0 Documentation</div>
		<div class="section">
			<a href="../../documentation/1.0/quick_start.html" class="quick-start">Quick-start</a><br/>
		</div>
		<div class="section">Core concepts</div>
		<div class="section-links">
			<a href="../../documentation/1.0/routes.html">Routes</a><br/>
			<a href="../../documentation/1.0/route_collections.html">Route collections</a><br/>
			<a href="../../documentation/1.0/restrictions.html">Restrictions</a><br/>
			<a href="../../documentation/1.0/responses.html">Responses</a><br/>
			<a href="../../documentation/1.0/caching.html">Caching</a><br/>
			<a href="../../documentation/1.0/authentication_providers.html">Authentication providers</a><br/>
			<a href="../../documentation/1.0/request_value_comparers.html">Request value comparers</a><br/>
			<a href="../../documentation/1.0/url_resolvers.html">URL resolvers</a>
		</div>
		<div class="section">Asset management</div>
		<div class="section-links">
			<a href="../../documentation/1.0/assets.html">Assets</a><br/>
			<a href="../../documentation/1.0/bundles.html">Bundles</a><br/>
			<a href="../../documentation/1.0/asset_concatenators.html">Asset Concatenators</a><br/>
			<a href="../../documentation/1.0/asset_transformers.html">Asset Transformers</a><br/>
			<a href="../../documentation/1.0/bundle_watchers.html">Bundle watchers</a><br/>
			<a href="../../documentation/1.0/bundle_watcher_routes.html">Bundle watcher routes</a>
		</div>
		<div class="section">
			<a href="../../documentation/1.0/diagnostics.html">Diagnostics</a>
			<div class="section-links">
				<a href="../../documentation/1.0/diagnosticroutehelper.html">DiagnosticRouteHelper</a><br/>
				<a href="../../documentation/1.0/diagnostic_configurations.html">Diagnostic configurations</a>
			</div>
		</div>
		<div class="section">ASP.net integration</div>
		<div class="section-links">
			<a href="../../documentation/1.0/juniorrouteapplication.html">JuniorRouteApplication</a><br/>
			<a href="../../documentation/1.0/juniorrouteapplicationconfiguration.html">JuniorRouteApplicationConfiguration</a><br/>
			<a href="../../documentation/1.0/aspnethttphandler.html">AspNetHttpHandler</a><br/>
			<a href="../../documentation/1.0/response_generators.html">Response generators</a><br/>
			<a href="../../documentation/1.0/response_handlers.html">Response handlers</a><br/>
			<a href="../../documentation/1.0/file_systems.html">FileSystem</a><br/>
			<a href="../../documentation/1.0/url_resolvers.html">UrlResolver</a>
		</div>
		<a href="../../documentation/1.0/auto_routing.html">Auto-routing</a>
		<div class="section-links">
			<a href="../../documentation/1.0/autoroutecollection.html">AutoRouteCollection</a><br/>
			<a href="../../documentation/1.0/containers.html">Containers</a><br/>
			<a href="../../documentation/1.0/class_filters.html">Class filters</a><br/>
			<a href="../../documentation/1.0/method_filters.html">Method filters</a><br/>
			<a href="../../documentation/1.0/name_mappers.html">Name mappers</a><br/>
			<a href="../../documentation/1.0/id_mappers.html">ID mappers</a><br/>
			<a href="../../documentation/1.0/resolved_relative_url_mappers.html">Resolved relative URL mappers</a><br/>
			<a href="../../documentation/1.0/restriction_mappers.html">Restriction mappers</a><br/>
			<a href="../../documentation/1.0/parameter_mappers.html">Parameter mappers</a><br/>
			<a href="../../documentation/1.0/model_property_mappers.html">Model property mappers</a><br/>
			<a href="../../documentation/1.0/response_mappers.html">Response mappers</a><br/>
			<a href="../../documentation/1.0/authentication_strategies.html">Authentication strategies</a><br/>
			<a href="../../documentation/1.0/forms_authentication.html">Forms authentication</a><br/>
			<a href="../../documentation/1.0/request_contexts.html">Request contexts</a>
		</div>
	</div>
	<div class="document"><h1 id='aspnet_integration__response_handlers'>ASP.net Integration - Response Handlers</h1>

<p>Response handlers optionally write a <a href='../../documentation/1.0/responses.html'>response</a> to the ASP.net pipeline. Response handlers may also perform server <a href='../../documentation/1.0/caching.html'>caching</a>. Response handlers are called in succession by <a href='../../documentation/1.0/aspnethttphandler.html'><code>AspNetHttpHandler</code></a> after a <a href='../../documentation/1.0/response_generators.html'>response generator</a> generates a response. Response handlers may choose to suggest a new response to the next response handler.</p>

<p>In the below example, a response handler is defined that writes the response&#8217;s type as text to the ASP.net pipeline.</p>
<div class='highlight'><pre><code class='csharp'><span class='k'>public</span> <span class='k'>class</span> <span class='nc'>ResponseTypeHandler</span> <span class='p'>:</span> <span class='n'>IResponseHandler</span>
<span class='p'>{</span>
  <span class='k'>public</span> <span class='n'>ResponseHandlerResult</span> <span class='nf'>HandleResponse</span><span class='p'>(</span><span class='n'>HttpRequestBase</span> <span class='n'>httpRequest</span><span class='p'>,</span> <span class='n'>HttpResponseBase</span> <span class='n'>httpResponse</span><span class='p'>,</span> <span class='n'>IResponse</span> <span class='n'>suggestedResponse</span><span class='p'>,</span> <span class='n'>ICache</span> <span class='n'>cache</span><span class='p'>,</span> <span class='kt'>string</span> <span class='n'>cacheKey</span><span class='p'>)</span>
  <span class='p'>{</span>
    <span class='n'>httpResponse</span><span class='p'>.</span><span class='n'>ContentType</span> <span class='p'>=</span> <span class='s'>&quot;text/plain&quot;</span><span class='p'>;</span>
    <span class='n'>httpResponse</span><span class='p'>.</span><span class='n'>Write</span><span class='p'>(</span><span class='n'>suggestedResponse</span> <span class='p'>!=</span> <span class='k'>null</span> <span class='p'>?</span> <span class='n'>suggestedResponse</span><span class='p'>.</span><span class='n'>GetType</span><span class='p'>().</span><span class='n'>FullName</span> <span class='p'>:</span> <span class='s'>&quot;&quot;</span><span class='p'>);</span>

    <span class='k'>return</span> <span class='n'>ResponseHandlerResult</span><span class='p'>.</span><span class='n'>ResponseWritten</span><span class='p'>();</span>
  <span class='p'>}</span>
<span class='p'>}</span>
</code></pre>
</div>
<p>JuniorRoute provides four built-in implementations:</p>

<ul>
<li><code>CacheableResponseHandler</code></li>

<li><code>NonCacheableResponseHandler</code></li>

<li><code>DescriptiveHtmlStatusCodeHandler</code></li>

<li><code>DescriptiveTextStatusCodeHandler</code></li>
</ul>

<h2 id='cacheableresponsehandler'>CacheableResponseHandler</h2>

<p>This implementation attempts to closely follow the HTTP 1.1 specification for handling client and server caching of responses. While there is too much logic to fully document here, the following responses may be written in certain circumstances:</p>

<ul>
<li>The presence of an If-Match request header may write a 412 Precondition Failed</li>

<li>The presence of an If-None-Match request header may write a 304 Not Modified, usually when the client is revalidating a cached response</li>

<li>The presence of an If-None-Match request header may write a 412 Precondition Failed</li>

<li>The presence of an If-Modified-Since request header may write a 304 Not Modified, usually when the client is revalidating a cached response</li>

<li>The presence of an If-Unmodified-Since request header may write a 412 Precondition Failed</li>
</ul>

<p>If the response does not have a server-cacheable status code, or if an Authorization request header is present, the response is written. In this case, any associated cache policy is ignored.</p>

<p>If the client is requesting only a cached response but the server cannot provide one, a 504 Gateway Timeout is written.</p>

<p>If none of the previous scenarios hold then a response is eligible for caching on the client and/or server. How that caching occurs is defined in detail by the HTTP 1.1 specification.</p>

<h2 id='noncacheableresponsehandler'>NonCacheableResponseHandler</h2>

<p>This implementation simply writes the generated response to the ASP.net pipeline. Use caution when using this implementation because it ignores all client request headers (e.g., Accept).</p>

<h2 id='descriptivehtmlstatuscodehandler'>DescriptiveHtmlStatusCodeHandler</h2>

<p>If there are no Accept request headers present, or an Accept request header with the media type <em>text/html</em> is present, a simple text response containing the generated status codes and a description of the status code, if available, is written. IIS custom errors are also skipped, if possible.</p>

<h2 id='descriptivetextstatuscodehandler'>DescriptiveTextStatusCodeHandler</h2>

<p>If there are no Accept request headers present, or an Accept request header with the media type <em>text/plain</em> is present, a simple text response containing the generated status codes and a description of the status code, if available, is written. IIS custom errors are also skipped, if possible.</p>

<h2 id='extensibility'>Extensibility</h2>

<p>Developers may create their own response generators by implementing the <code>IResponseHandler</code> interface.</p></div>
</div>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script>window.jQuery || document.write('<script src="../../js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
		<script src="../../js/plugins.js"></script>
		<script>
			var _gaq=[['_setAccount','UA-36144505-1'],['_trackPageview']];
				(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
				g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
				s.parentNode.insertBefore(g,s)}(document,'script'));
		</script>
    </body>
</html>