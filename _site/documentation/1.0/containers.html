<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Containers - JuniorRoute</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width">
		<link rel="shortcut icon" href="../../favicon.ico">
		<link rel="stylesheet" href="../../css/normalize.css">
		<link rel="stylesheet" href="../../css/main.css">
		<link rel="stylesheet" href="../../css/common.css">
		<link rel="stylesheet" href="../../css/pygments.css">
		<script src="../../js/vendor/modernizr-2.6.2.min.js"></script>
	</head>
	<body>
		<!--[if lt IE 7]>
			<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
		<![endif]-->
		<div class="header">
	<h1>JuniorRoute</h1>
	<h2>the easy-to-learn, easy-to-use routing framework for .NET</h2>
</div>
		<div class="header-links">
	<div class="link-container-left menu" -data-menu="documentation-menu">
		<a href="../../documentation/1.0/quick_start.html">Documentation</a>
		<div class="menu-drop-down documentation-menu visuallyhidden">
			<a href="../../documentation/1.0/quick_start.html">Version 1.0</a>
		</div>
	</div>
	<div class="link-container-left menu" -data-menu="resources-menu">
		<span class="dummy">Resources</span>
		<div class="menu-drop-down resources-menu visuallyhidden">
			<a href="https://github.com/NathanAlden/JuniorRoute" target="_blank">Respository</a><br/>
			<a href="https://github.com/NathanAlden/JuniorRoute/wiki" target="_blank">Wiki</a>
		</div>
	</div>
	<div class="spacer"></div>
	<div class="link-container-right menu" -data-menu="other-projects-menu">
		<a href="https://github.com/NathanAlden" target="_blank">Other Projects by Nathan Alden, Sr.</a>
		<div class="menu-drop-down other-projects-menu visuallyhidden">
			<a href="https://github.com/NathanAlden/JuniorPersist">JuniorPersist</a></br>
			<a href="https://github.com/NathanAlden/JuniorMap">JuniorMap</a></br>
			<a href="https://github.com/NathanAlden/FirefoxAutoRefresh">Firefox Auto Refresh</a></br>
			<a href="https://github.com/NathanAlden" class="and-more">...and more!</a>
		</div>
	</div>
</div>
		<div class="documentation">
	<div class="navigation">
		<a href="../../index.html">Introduction</a>
		<div class="section">
			<a href="../../understanding_http_1.1.html">Understanding HTTP 1.1</a><br/>
		</div>
		<div class="section documentation-version">Version 1.0 Documentation</div>
		<div class="section">
			<a href="../../documentation/1.0/quick_start.html" class="quick-start">Quick-start</a><br/>
		</div>
		<div class="section">Core concepts</div>
		<div class="section-links">
			<a href="../../documentation/1.0/routes.html">Routes</a><br/>
			<a href="../../documentation/1.0/route_collections.html">Route collections</a><br/>
			<a href="../../documentation/1.0/restrictions.html">Restrictions</a><br/>
			<a href="../../documentation/1.0/responses.html">Responses</a><br/>
			<a href="../../documentation/1.0/caching.html">Caching</a><br/>
			<a href="../../documentation/1.0/authentication_providers.html">Authentication providers</a><br/>
			<a href="../../documentation/1.0/request_value_comparers.html">Request value comparers</a><br/>
			<a href="../../documentation/1.0/url_resolvers.html">URL resolvers</a>
		</div>
		<div class="section">Asset management</div>
		<div class="section-links">
			<a href="../../documentation/1.0/assets.html">Assets</a><br/>
			<a href="../../documentation/1.0/bundles.html">Bundles</a><br/>
			<a href="../../documentation/1.0/asset_concatenators.html">Asset Concatenators</a><br/>
			<a href="../../documentation/1.0/asset_transformers.html">Asset Transformers</a><br/>
			<a href="../../documentation/1.0/bundle_watchers.html">Bundle watchers</a><br/>
			<a href="../../documentation/1.0/bundle_watcher_routes.html">Bundle watcher routes</a>
		</div>
		<div class="section">
			<a href="../../documentation/1.0/diagnostics.html">Diagnostics</a>
			<div class="section-links">
				<a href="../../documentation/1.0/diagnosticroutehelper.html">DiagnosticRouteHelper</a><br/>
				<a href="../../documentation/1.0/diagnostic_configurations.html">Diagnostic configurations</a>
			</div>
		</div>
		<div class="section">ASP.net integration</div>
		<div class="section-links">
			<a href="../../documentation/1.0/juniorrouteapplication.html">JuniorRouteApplication</a><br/>
			<a href="../../documentation/1.0/juniorrouteapplicationconfiguration.html">JuniorRouteApplicationConfiguration</a><br/>
			<a href="../../documentation/1.0/aspnethttphandler.html">AspNetHttpHandler</a><br/>
			<a href="../../documentation/1.0/response_generators.html">Response generators</a><br/>
			<a href="../../documentation/1.0/response_handlers.html">Response handlers</a><br/>
			<a href="../../documentation/1.0/file_systems.html">FileSystem</a><br/>
			<a href="../../documentation/1.0/url_resolvers.html">UrlResolver</a>
		</div>
		<a href="../../documentation/1.0/auto_routing.html">Auto-routing</a>
		<div class="section-links">
			<a href="../../documentation/1.0/autoroutecollection.html">AutoRouteCollection</a><br/>
			<a href="../../documentation/1.0/containers.html">Containers</a><br/>
			<a href="../../documentation/1.0/class_filters.html">Class filters</a><br/>
			<a href="../../documentation/1.0/method_filters.html">Method filters</a><br/>
			<a href="../../documentation/1.0/name_mappers.html">Name mappers</a><br/>
			<a href="../../documentation/1.0/id_mappers.html">ID mappers</a><br/>
			<a href="../../documentation/1.0/resolved_relative_url_mappers.html">Resolved relative URL mappers</a><br/>
			<a href="../../documentation/1.0/restriction_mappers.html">Restriction mappers</a><br/>
			<a href="../../documentation/1.0/parameter_mappers.html">Parameter mappers</a><br/>
			<a href="../../documentation/1.0/model_property_mappers.html">Model property mappers</a><br/>
			<a href="../../documentation/1.0/response_mappers.html">Response mappers</a><br/>
			<a href="../../documentation/1.0/authentication_strategies.html">Authentication strategies</a><br/>
			<a href="../../documentation/1.0/forms_authentication.html">Forms authentication</a><br/>
			<a href="../../documentation/1.0/request_contexts.html">Request contexts</a>
		</div>
	</div>
	<div class="document"><h1 id='autorouting__containers'>Auto-routing - Containers</h1>

<p>JuniorRoute uses containers to support <a href='http://en.wikipedia.org/wiki/Dependency_injection'>dependency injection</a>, usually combined with an <a href='http://en.wikipedia.org/wiki/Inversion_of_control'>inversion-of-control</a> (IoC) container. However, JuniorRoute does not have a dependency on a specific container implementation; instead, JuniorRoute exposes an <code>IContainer</code> interface. <code>IContainer</code>&#8217;s sole purpose is retrieving instances of objects given a type.</p>

<h2 id='icontainer_implementations'>IContainer Implementations</h2>

<p>JuniorRoute has no built-in third-party <code>IContainer</code> implementations because doing so would introduce an IoC container dependency; however, JuniorRoute does provide several implementations to handle basic cases. In most cases, developers are encouraged to implement <code>IContainer</code> themselves.</p>

<h2 id='how_autoroutecollection_uses_containers'>How AutoRouteCollection Uses Containers</h2>

<p>Within <a href='../../documentation/1.0/autoroutecollection.html'><code>AutoRouteCollection</code></a>, <code>IContainer</code> implementations:</p>

<ul>
<li>retrieve endpoint class instances</li>

<li>retrieve <a href='../../documentation/1.0/restrictions.html'>restriction</a> instances</li>

<li>retrieve <a href='../../documentation/1.0/bundles.html'>bundle</a> dependency instances</li>
</ul>

<h3 id='endpoint_containers'>Endpoint Containers</h3>

<p>Endpoint containers retrieve instances of endpoint types. There are no types required to be created by endpoint containers. <code>AutoRouteCollection</code> defaults to using the <code>NewInstancePerRouteEndpointContainer</code> class for its endpoint container.</p>

<p>Most developers should register these three interfaces in their endpoint container implementations, as these interfaces are commonly used by endpoints:</p>

<ul>
<li><a href='../../documentation/1.0/request_contexts.html'><code>IRequestContext</code></a> with the <code>RequestContext</code> implementation</li>

<li><a href='../../documentation/1.0/url_resolvers.html'><code>IUrlResolver</code></a> with the <code>UrlResolver</code> implementation</li>

<li><code>ISystemClock</code> with the <code>SystemClock</code> implementation</li>
</ul>

<p>In the below example, an Autofac-based endpoint container is provided to an <code>AutoRouteCollection</code> instance.</p>
<div class='highlight'><pre><code class='csharp'><span class='k'>public</span> <span class='k'>class</span> <span class='nc'>EndpointContainer</span> <span class='p'>:</span> <span class='n'>IContainer</span>
<span class='p'>{</span>
  <span class='k'>private</span> <span class='k'>readonly</span> <span class='n'>Autofac</span><span class='p'>.</span><span class='n'>IContainer</span> <span class='n'>_container</span><span class='p'>;</span>

  <span class='k'>public</span> <span class='nf'>EndpointContainer</span><span class='p'>(</span><span class='n'>Autofac</span><span class='p'>.</span><span class='n'>IContainer</span> <span class='n'>container</span><span class='p'>)</span>
  <span class='p'>{</span>
    <span class='n'>_container</span> <span class='p'>=</span> <span class='n'>container</span><span class='p'>;</span>
  <span class='p'>}</span>

  <span class='k'>public</span> <span class='n'>T</span> <span class='n'>GetInstance</span><span class='p'>&lt;</span><span class='n'>T</span><span class='p'>&gt;()</span>
  <span class='p'>{</span>
    <span class='k'>return</span> <span class='n'>_container</span><span class='p'>.</span><span class='n'>Resolve</span><span class='p'>&lt;</span><span class='n'>T</span><span class='p'>&gt;();</span>
  <span class='p'>}</span>

  <span class='k'>public</span> <span class='kt'>object</span> <span class='nf'>GetInstance</span><span class='p'>(</span><span class='n'>Type</span> <span class='n'>type</span><span class='p'>)</span>
  <span class='p'>{</span>
    <span class='k'>return</span> <span class='n'>_container</span><span class='p'>.</span><span class='n'>Resolve</span><span class='p'>(</span><span class='n'>type</span><span class='p'>);</span>
  <span class='p'>}</span>
<span class='p'>}</span>
<span class='p'>...</span>
<span class='kt'>var</span> <span class='n'>container</span> <span class='p'>=</span> <span class='k'>new</span> <span class='n'>EndpointContainer</span><span class='p'>(</span><span class='n'>autofacContainer</span><span class='p'>);</span>

<span class='k'>new</span> <span class='nf'>AutoRouteCollection</span><span class='p'>().</span><span class='n'>EndpointContainer</span><span class='p'>(</span><span class='n'>container</span><span class='p'>);</span>
</code></pre>
</div>
<h3 id='restriction_containers'>Restriction Containers</h3>

<p>Restriction containers are used by some <a href='../../documentation/1.0/restriction_mappers.html'>restriction mappers</a> to provide implementations of interfaces required by those restrictions. If there are no restriction mappers registered with an <code>AutoRouteCollection</code> instance then a restriction container is not required.</p>

<p>Currently only the <code>UrlRelativePathRestriction</code> class needs dependency injection, and its only dependency is <code>IHttpRuntime</code>.</p>

<p>Developers are encouraged to use the built-in <code>DefaultRestrictionContainer</code> implementation and supply an <code>HttpRuntimeWrapper</code> instance to its constructor.</p>

<p>In the below example, a <code>DefaultRestrictionContainer</code> is instantiated. Then, the container is provided to an <code>AutoRouteCollection</code> instance.</p>
<div class='highlight'><pre><code class='csharp'><span class='kt'>var</span> <span class='n'>container</span> <span class='p'>=</span> <span class='k'>new</span> <span class='n'>DefaultRestrictionContainer</span><span class='p'>(</span><span class='k'>new</span> <span class='n'>HttpRuntimeWrapper</span><span class='p'>());</span>

<span class='k'>new</span> <span class='nf'>AutoRouteCollection</span><span class='p'>()</span>
  <span class='p'>.</span><span class='n'>RestrictionContainer</span><span class='p'>(</span><span class='n'>container</span><span class='p'>);</span>
</code></pre>
</div>
<h3 id='bundle_dependency_containers'>Bundle Dependency Containers</h3>

<p>Bundle dependency containers are used by <code>AutoRouteCollection</code>&#8217;s bundle helper methods (e.g., <code>CssBundle</code> and <code>JavaScriptBundle</code>). These helper methods create <a href='../../documentation/1.0/bundle_watchers.html'><code>BundleWatcher</code></a> instances and instances of classes derived from <a href='../../documentation/1.0/bundle_watcher_routes.html'><code>BundleWatcherRoute&lt;T&gt;</code></a>. These classes have four dependencies:</p>

<ul>
<li><a href='../../documentation/1.0/file_systems.html'><code>IFileSystem</code></a></li>

<li><code>IGuidFactory</code></li>

<li><code>IHttpRuntime</code></li>

<li><code>ISystemClock</code></li>
</ul>

<p>All bundle dependency contains must be able to create instances of classes implementing these four interfaces.</p>

<p>Developers are encouraged to use the built-in <code>DefaultBundleDependencyContainer</code> implementation and supply an <code>HttpRuntimeWrapper</code> instance and a <code>FileSystem</code> instance in its constructor.</p>

<p>In the below example, a <code>DefaultBundleDependencyContainer</code> is instantiated. Then, the container is provided to an <code>AutoRouteCollection</code> instance.</p>
<div class='highlight'><pre><code class='csharp'><span class='kt'>var</span> <span class='n'>container</span> <span class='p'>=</span> <span class='k'>new</span> <span class='n'>DefaultBundleDependencyContainer</span><span class='p'>(</span><span class='k'>new</span> <span class='n'>HttpRuntimeWrapper</span><span class='p'>(),</span> <span class='k'>new</span> <span class='n'>FileSystem</span><span class='p'>());</span>

<span class='k'>new</span> <span class='nf'>AutoRouteCollection</span><span class='p'>()</span>
  <span class='p'>.</span><span class='n'>BundleDependencyContainer</span><span class='p'>(</span><span class='n'>container</span><span class='p'>);</span>
</code></pre>
</div>
<h2 id='popular_ioc_containers'>Popular IoC Containers</h2>

<p>It is recommended that developers use an IoC container with their JuniorRoute applications. Here are four popular containers:</p>

<ul>
<li><a href='http://code.google.com/p/autofac/'>Autofac</a></li>

<li><a href='http://docs.structuremap.net/'>StructureMap</a></li>

<li><a href='http://unity.codeplex.com/'>Unity</a></li>

<li><a href='http://docs.castleproject.org/Windsor.MainPage.ashx'>Castle Windsor</a></li>
</ul>

<h2 id='extensibility'>Extensibility</h2>

<p>Developers may create their own containers by implementing the <code>IContainer</code> interface.</p></div>
</div>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script>window.jQuery || document.write('<script src="../../js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
		<script src="../../js/plugins.js"></script>
		<script>
			var _gaq=[['_setAccount','UA-36144505-1'],['_trackPageview']];
				(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
				g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
				s.parentNode.insertBefore(g,s)}(document,'script'));
		</script>
    </body>
</html>